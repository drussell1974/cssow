# -*- coding: utf-8 -*-
from gluon.contrib.appconfig import AppConfig

configuration = AppConfig(reload=True)

db = DAL(configuration.get('db.uri'),
     pool_size=configuration.get('db.pool_size'),
     migrate_enabled=configuration.get('db.migrate'),
     check_reserved=['all'])


class _BaseModel:
    id = 0
    created = ""
    created_by = ""
    is_valid = False

    def is_new(this):
        if this.id == 0:
            return True
        else:
            return False

    def get_last_insert_row_id():
        # get last inserted row id
        rows = db.executesql("SELECT LAST_INSERT_ID();")

        rval = None # Should not be zero (handle has necessary)
        for row in rows:
            rval = row

        return rval


    def date_created_ui(this):
        return datetime.strftime(this.created, "%d %B %Y")
