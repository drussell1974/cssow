{% extends 'default/__layout.twocolumn.html' %}


{% block breadcrumb %}
<nav class="navbar navbar-expand-lg navbar-light" id="itemNav">
  <div class="container">
    <ul class="navbar-nav ml-auto">
      <li class="nav-item">
        <a class="nav-link" id="lnk-bc-schemes_of_work" href="{% url 'schemesofwork.index' %}">{{_("Schemes of Work")}}</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="lnk-bc-lessons" href="{% url 'lesson.index' content.data.scheme_of_work_id %}">{{_("Lessons")}}</a>
      </li>
    </ul>
  </div>
</nav>
{% endblock %}


{% block contentheading %}
<div class="alert alert-secondary">
  <h5 class="secondary-heading">
    {{ content.sub_heading }}
      {% if request.user.is_authenticated %}
      - <a class="small" id="btn-edit" href="{% url 'lesson.edit' content.data.lesson_id content.data.scheme_of_work_id %}?next={{ request.url }}">{{_("Edit")}}</a> 
      - <a class="small" id="btn-copy" href="{% url 'lesson.copy' content.data.lesson_id content.data.scheme_of_work_id %}">{{_("Copy")}}</a>
      {% endif %}
  </h5>
  {% if content.data.strap_line is not None %}
  <p class="lead">
      {{ content.data.strap_line }}
  </p>
  {% endif %}
</div>
{% endblock %}


{% block sidecontent %}
<!-- Blackboard display button START -->
<section class="alert alert-secondary">
  <a href="{% url 'lesson.whiteboard_view' content.data.scheme_of_work_id content.data.lesson_id %}" target="_blank" class="btn btn-dark" id="lnk-whiteboard_view">
    {{_("Blackboard display")}}
  </a>
  <a href="{$ url 'lesson.lessonplan' content.data.scheme_of_work_id content.data.lesson_id %}" target="_blank" class="btn btn-light" id="lnk-lesson_plan">
    {{_("Lesson plan")}}
  </a>
</section>
<!-- Blackboard display button END -->
<!-- SIDE MENU START -->
<nav class="navbar navbar-expand-lg navbar-light" id="sidebarNav">
  <button class="navbar-toggler btn" type="button" data-toggle="collapse" data-target="#sidebarResponsive" aria-controls="sidebarResponsive" aria-expanded="true" aria-label="Toggle navigation">
      {{_("Show lessons")}}
      <i class="fas fa-bars"></i>
  </button>
  <div class="collapse navbar-collapse" id="sidebarResponsive">
    <ul class="navbar-nav flex-column fillspace">
      {% for opt in content.data.lesson_options %}
      <li class="nav-item {% if opt.id == content.data.lesson_id %}mark{% endif %}">
          <a class="nav-link" href="{% url 'learningobjective.index' content.data.scheme_of_work_id opt.id %}" id="nav-link-lesson-{{opt.id}}">
            {{ opt.title }} <div class="small">{{ opt.key_stage_name}}</div>
          </a>
      </li>
    {% endfor %}
    </ul>
  </div><!-- class="collapse navbar-collapse" id="sidebarResponsive" -->
</nav><!-- class="navbar navbar-expand-lg navbar-light" id="sidebarNav" -->

<!-- SIDE MENU END -->
{% endblock %}


{% block maincontent %}

{% if request.user.is_authenticated %}
    <a class="navbar-brand btn btn-warning float-right" id="btn-new" href="{% url 'learningobjective.new' content.data.scheme_of_work_id content.data.lesson_id %}">{{_('New')}}</a>
{% endif %}

<h2 class="group-heading">{{_("Learning objectives")}}</h2>
            

{% if content.data.learning_objectives|length == 0 %}
<div class="alert alert-info" role="alert">
    <span class="small">{{_('There are no learning objectives for this lesson.')}}</span>
</div>
{% else %}
  {% for row in content.data.learning_objectives %}
    <div class="post-preview">
      <a name="{{ row.id }}"></a>
      <a href="#{{row.id}}" class="disabled">
        <h4 class="post-title">
          {% if row.solo_taxonomy_level == "B" %}
            <i class="far fa-star"></i>
          {% elif row.solo_taxonomy_level == "C" %}
            <i class="fas fa-star"></i>
          {% elif row.solo_taxonomy_level == "D" %}
            <i class="fas fa-trophy"></i>
          {% endif %}
          {{ row.description}}
        </h4>
        {% if request.user.is_authenticated %}
          <div class="custom-control custom-checkbox">  
            <input type="checkbox" class="custom-control-input is_key_objective" id="chk-is_key_objective-{{row.id}}" {% if row.is_key_objective %} checked {% endif %} value="{{ row.id }}">
            <label class="custom-control-label small" for="chk-is_key_objective-{{ row.id }}" id="lbl-is_key_objective-{{ row.id }}">{{_("This is a key learning objective")}}</label>
          </div>
        {% endif %}
        <h5 class="post-subtitle">
            {{ row.topic_name}}
        </h5>
      </a>
      <p class="post-meta">{{_("Created by")}}
        <a href="#">{{ row.created_by_name }}</a> on {{ row.created }}
        {% if request.user.is_authenticated %}
          - <a href="{% url 'learningobjective.delete_item' content.data.scheme_of_work_id row.lesson_id row.id %} ">{{_("Remove")}}</a>
           - <a href="{% url 'learningobjective.edit' content.data.scheme_of_work_id content.data.lesson_id row.id %}">{{_("Edit")}}</a>
        {% endif %}
      </p>
          </div>
          <hr>
  {% endfor %}
  {% endif %}

  {% if request.user.is_authenticated %}
    <a class="navbar-brand btn btn-danger float-right" id="btn-delete-unpublished" href="{% url 'learningobjective.delete_unpublished' content.data.scheme_of_work_id content.data.lesson_id %}">{{_('Clean')}}</a>
  {% endif %}

{% endblock %}