{% extends 'default/__layout.twocolumn.html' %}


{% block breadcrumb %}
<nav class="navbar navbar-expand-lg navbar-light" id="itemNav">
  <div class="container">
    <ul class="navbar-nav ml-auto">
      <li class="nav-item">
        <a class="nav-link" id="lnk-bc-schemes_of_work" href="{% url 'schemesofwork.index' %}">{{_("Schemes of Work")}}</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" id="lnk-bc-lessons" href="{% url 'lesson.index' content.data.scheme_of_work_id %}">{{_("Lessons")}}</a>
      </li>
    </ul>
  </div>
</nav>
{% endblock %}


{% block sidecontent %}
<!-- Blackboard display button START -->
<section class="alert alert-secondary">
  <a href="{% url 'lesson.whiteboard_view' content.data.scheme_of_work_id content.data.lesson_id %}" target="_blank" class="btn btn-dark" id="lnk-whiteboard_view">
    {{_("Blackboard display")}}
  </a>
</section>
<!-- Blackboard display button END -->
<!-- SIDE MENU START -->
<nav class="navbar navbar-expand-lg navbar-light" id="sidebarNav">
  <button class="navbar-toggler btn" type="button" data-toggle="collapse" data-target="#sidebarResponsive" aria-controls="sidebarResponsive" aria-expanded="true" aria-label="Toggle navigation">
      {{_("Show lessons")}}
      <i class="fas fa-bars"></i>
  </button>
  <div class="collapse navbar-collapse" id="sidebarResponsive">
    <ul class="navbar-nav flex-column fillspace">
      {% for opt in content.data.lesson_options %}
      <li class="nav-item {% if opt.id == content.data.lesson_id %}mark{% endif %}">
          <a class="nav-link" href="{% url 'resource.index' content.data.scheme_of_work_id opt.id %}" id="nav-link-lesson-{{opt.id}}">
            {{ opt.title }} <div class="small">{{ opt.key_stage_name}}</div>
          </a>
      </li>
    {% endfor %}
    </ul>
  </div><!-- class="collapse navbar-collapse" id="sidebarResponsive" -->
</nav><!-- class="navbar navbar-expand-lg navbar-light" id="sidebarNav" -->

<!-- SIDE MENU END -->
{% endblock %}


{% block contentheading %}
<!-- Move to right column in index.template -->
{% endblock %}


{% block maincontent %}

<!-- block content heading -->
<h1 class="secondary-heading">
  {{ content.sub_heading }}
</h1>
{% if content.data.strap_line is not None %}
<p class="lead">
    {{ content.data.strap_line }}
</p>
{% endif %}

<nav class="navbar navbar-expand-lg navbar-light bg-light">
  <a class="navbar-brand" href="#">{{_("lesson options")}}</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#lessonNavbarNav" aria-controls="lessonNavbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="lessonNavbarNav">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a href="{% url 'learningobjective.index' content.data.scheme_of_work_id content.data.lesson_id %}" class="btn btn-outline-dark nav-link">
          {{_("learning objectives")}} <span class="badge badge-light"></span>
        </a>
      </li>
      <li class="nav-item active">
        <a href="{% url 'resource.index' content.data.scheme_of_work_id content.data.lesson_id %}"  class="btn btn-outline-dark nav-link">
          {{_("resources")}} <span class="badge badge-light" ></span>
        </a>
      </li>
      <li class="nav-item">
        <a class="btn btn-outline-dark nav-link" id="btn-edit" href="{% url 'lesson.edit' content.data.scheme_of_work_id content.data.lesson_id %}?next={{ request.url }}">{{_("edit")}}</a> 
      </li>
      <li class="nav-item">
        <a class="btn btn-outline-dark nav-link" href="{% url 'lesson.copy' content.data.scheme_of_work_id content.data.lesson_id %}">{{_("copy")}}</a>
      </li>
    </ul>
  </div>
</nav>
<!--// block contentheading END-->

<!-- Pager Header -->      
{% if request.user.is_authenticated %}
  <span class="float-right">  
    <a class="btn btn-warning" id="btn-new" href="{% url 'resource.new' content.data.scheme_of_work_id content.data.lesson_id %}">{{_("add")}}</a>
  </span>
{% endif %}
<h2 class="group-heading">{{_("Resources")}}</h2>
<hr />
<!-- Pager Header END -->      

{% if content.data.resources|length == 0 %}
<div class="" role="alert">
    <span class="large">{{_('There are no resources for this lesson.')}}</span>
</div>
{% else %}
  {% for row in content.data.resources %}
    <div class="post-preview {{ row.published_state }}">
      <a name="{{ row.id }}"></a>
      <a class="edit" href="{% url 'resource.edit' content.data.scheme_of_work_id content.data.lesson_id row.id %}">
        <h3 class="post-title">
          <i class="fa {{row.type_icon}}"></i> {{ row.title }}
        </h3>
        <h4 class="post-subtitle">
            {{ row.publisher }}
        </h4>
      </a>
      <p class="post-meta">{{_("Created by")}}
        <a href="#">{{ row.created_by_name }}</a> on {{ row.created }}
        {% if request.user.is_authenticated %}
          {% if row.published == False %} 
              <a href="{% url 'resource.publish_item' content.data.scheme_of_work_id row.lesson_id row.id %}?return={{request.url}}" class="small badge badge-danger">{{_("not published")}}</a>
          {% endif %}
        {% endif %}
      </p>
    </div>
    <hr>
  {% endfor %}
  {% if request.user.is_authenticated %}
    <a class="navbar-brand btn btn-danger float-right" id="btn-delete-unpublished" href="{% url 'resource.delete_unpublished' content.data.scheme_of_work_id content.data.lesson_id %}">{{_('Clean')}}</a>
  {% endif %}
  {% endif %}


{% endblock %}